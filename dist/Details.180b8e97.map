{"version":3,"sources":["../node_modules/@reach/router/lib/history.js","Carosel.js","Modal.js","Details.js"],"names":["Carosel","state","photos","active","handleIndexClick","event","setState","target","dataset","index","value","map","photo","media","filter","Component","modalRoot","document","getElementById","Modal","props","el","createElement","appendChild","removeChild","children","React","petfinder","key","secret","loading","LoadableModal","loader","Details","showModal","toggleModal","pet","get","output","id","then","data","breed","Array","isArray","breeds","join","name","animal","location","contact","city","description","catch","console","log","myH1"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACjJA;;;;;;;;;;;;;;;;;;;;;;IAEaA;;;;;;;;;;;;;;;;;;uMACXC,QAAQ;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,MAAM,EAAE;AAFF,aAmBRC,mBAAmB,UAACC,KAAD,EAAW;AAC5B,YAAKC,QAAL,CAAc;AACZ;AACA;AACAH,QAAAA,MAAM,EAAE,CAACE,KAAK,CAACE,MAAN,CAAaC,OAAb,CAAqBC;AAHlB,OAAd;AAKD;;;;;6BACQ;AAAA;;AAAA,wBACoB,KAAKR,KADzB;AAAA,UACCC,MADD,eACCA,MADD;AAAA,UACSC,MADT,eACSA,MADT;AAGP,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","file":"Details.180b8e97.map","sourceRoot":"..\\src","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar getLocation = function getLocation(source) {\n  return _extends({}, source.location, {\n    state: source.history.state,\n    key: source.history.state && source.history.state.key || \"initial\"\n  });\n};\n\nvar createHistory = function createHistory(source, options) {\n  var listeners = [];\n  var location = getLocation(source);\n  var transitioning = false;\n  var resolveTransition = function resolveTransition() {};\n\n  return {\n    get location() {\n      return location;\n    },\n\n    get transitioning() {\n      return transitioning;\n    },\n\n    _onTransitionComplete: function _onTransitionComplete() {\n      transitioning = false;\n      resolveTransition();\n    },\n    listen: function listen(listener) {\n      listeners.push(listener);\n\n      var popstateListener = function popstateListener() {\n        location = getLocation(source);\n        listener({ location: location, action: \"POP\" });\n      };\n\n      source.addEventListener(\"popstate\", popstateListener);\n\n      return function () {\n        source.removeEventListener(\"popstate\", popstateListener);\n        listeners = listeners.filter(function (fn) {\n          return fn !== listener;\n        });\n      };\n    },\n    navigate: function navigate(to) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          state = _ref.state,\n          _ref$replace = _ref.replace,\n          replace = _ref$replace === undefined ? false : _ref$replace;\n\n      state = _extends({}, state, { key: Date.now() + \"\" });\n      // try...catch iOS Safari limits to 100 pushState calls\n      try {\n        if (transitioning || replace) {\n          source.history.replaceState(state, null, to);\n        } else {\n          source.history.pushState(state, null, to);\n        }\n      } catch (e) {\n        source.location[replace ? \"replace\" : \"assign\"](to);\n      }\n\n      location = getLocation(source);\n      transitioning = true;\n      var transition = new Promise(function (res) {\n        return resolveTransition = res;\n      });\n      listeners.forEach(function (listener) {\n        return listener({ location: location, action: \"PUSH\" });\n      });\n      return transition;\n    }\n  };\n};\n\n////////////////////////////////////////////////////////////////////////////////\n// Stores history entries in memory for testing or other platforms like Native\nvar createMemorySource = function createMemorySource() {\n  var initialPathname = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"/\";\n\n  var index = 0;\n  var stack = [{ pathname: initialPathname, search: \"\" }];\n  var states = [];\n\n  return {\n    get location() {\n      return stack[index];\n    },\n    addEventListener: function addEventListener(name, fn) {},\n    removeEventListener: function removeEventListener(name, fn) {},\n\n    history: {\n      get entries() {\n        return stack;\n      },\n      get index() {\n        return index;\n      },\n      get state() {\n        return states[index];\n      },\n      pushState: function pushState(state, _, uri) {\n        var _uri$split = uri.split(\"?\"),\n            pathname = _uri$split[0],\n            _uri$split$ = _uri$split[1],\n            search = _uri$split$ === undefined ? \"\" : _uri$split$;\n\n        index++;\n        stack.push({ pathname: pathname, search: search });\n        states.push(state);\n      },\n      replaceState: function replaceState(state, _, uri) {\n        var _uri$split2 = uri.split(\"?\"),\n            pathname = _uri$split2[0],\n            _uri$split2$ = _uri$split2[1],\n            search = _uri$split2$ === undefined ? \"\" : _uri$split2$;\n\n        stack[index] = { pathname: pathname, search: search };\n        states[index] = state;\n      }\n    }\n  };\n};\n\n////////////////////////////////////////////////////////////////////////////////\n// global history - uses window.history as the source if available, otherwise a\n// memory history\nvar canUseDOM = !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\nvar getSource = function getSource() {\n  return canUseDOM ? window : createMemorySource();\n};\n\nvar globalHistory = createHistory(getSource());\nvar navigate = globalHistory.navigate;\n\n////////////////////////////////////////////////////////////////////////////////\n\nexports.globalHistory = globalHistory;\nexports.navigate = navigate;\nexports.createHistory = createHistory;\nexports.createMemorySource = createMemorySource;","import React, { Component } from \"react\";\r\n\r\nexport class Carosel extends Component {\r\n  state = {\r\n    photos: [],\r\n    active: 0,\r\n  };\r\n  static getDerivedStateFromProps({ media }) {\r\n    let photos = [];\r\n\r\n    if (media && media.photos && media.photos.photo) {\r\n      photos = media.photos.photo.filter((photo) => photo[\"@size\"] === \"pn\");\r\n    }\r\n\r\n    return { photos };\r\n  }\r\n  // Arrow function binds to proper this.\r\n  // Therefore don't need:\r\n  // constructor(props) {\r\n  //       super(props);\r\n  //       this.handleIndexClick = thils.handleIndexClick.bind(this); <-- es5 syntax\r\n  //   }\r\n  handleIndexClick = (event) => {\r\n    this.setState({\r\n      // + coerces the string to number\r\n      // NOTE: Has access to data attributes.\r\n      active: +event.target.dataset.index,\r\n    });\r\n  };\r\n  render() {\r\n    const { photos, active } = this.state;\r\n\r\n    return (\r\n      <div className=\"carosuel\">\r\n        <img src={photos[active].value} alt=\"primary animal\" />\r\n        <div className=\"carosusel-smaller\">\r\n          {photos.map((photo, index) => (\r\n            /* eslint-disable-next-line */\r\n            <img\r\n              onClick={this.handleIndexClick}\r\n              key={photo.value}\r\n              // NOTE: Using data attributes for eventing.\r\n              data-index={index}\r\n              src={photo.value}\r\n              className={index === active ? \"active\" : \"\"}\r\n              alt=\"animal thumbnail\"\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Carosel;\r\n","import React from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\n\r\nconst modalRoot = document.getElementById(\"modal\");\r\n\r\nclass Modal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.el = document.createElement(\"div\");\r\n  }\r\n\r\n  componentDidMount() {\r\n    modalRoot.appendChild(this.el);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    modalRoot.removeChild(this.el);\r\n  }\r\n\r\n  render() {\r\n    return createPortal(this.props.children, this.el);\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport pf from \"petfinder-client\";\r\nimport { navigate } from \"@reach/router/lib/history\";\r\nimport Carosel from \"./Carosel\";\r\nimport Loadable from \"react-loadable\";\r\nimport Modal from \"./Modal\";\r\n\r\nconst petfinder = pf({\r\n  key: process.env.API_KEY,\r\n  secret: process.env.API_SECRET,\r\n});\r\n\r\nconst loading = () => <h1>Loading</h1>;\r\n\r\nconst LoadableModal = Loadable({\r\n  loader: () => import(\"./AdoptModalContent\"),\r\n  loading,\r\n});\r\n\r\nclass Details extends React.Component {\r\n  state = {\r\n    loading: true,\r\n    showModal: false,\r\n  };\r\n  toggleModal = () => {\r\n    this.setState({ showModal: !this.state.showModal });\r\n  };\r\n  componentDidMount() {\r\n    petfinder.pet\r\n      .get({\r\n        output: \"full\",\r\n        id: this.props.id,\r\n      })\r\n      .then((data) => {\r\n        const pet = data.petfinder.pet;\r\n        let breed;\r\n\r\n        if (Array.isArray(pet.breeds.breed)) {\r\n          breed = pet.breeds.breed.join(\", \");\r\n        } else {\r\n          breed = pet.breeds.breed;\r\n        }\r\n\r\n        this.setState({\r\n          name: pet.name,\r\n          animal: pet.animal,\r\n          location: `${pet.contact.city}, ${pet.contact.state}`,\r\n          description: pet.description,\r\n          media: pet.media,\r\n          breed,\r\n          loading: false,\r\n          // Spread operation usage instead of explicit usage.\r\n          // {...pet}\r\n        });\r\n      })\r\n      .catch(navigate(\"/\"));\r\n  }\r\n  render() {\r\n    if (this.state.loading) {\r\n      return <h1>loading...</h1>;\r\n    }\r\n\r\n    const { name, animal, breed, location, description, media, showModal } = this.state;\r\n\r\n    console.log(this.myH1);\r\n\r\n    return (\r\n      <div className=\"details\">\r\n        <Carosel media={media} />\r\n        <div>\r\n          <h1 ref={(el) => (this.myH1 = el)}>{name}</h1>\r\n          <h2>\r\n            {animal} - {breed} - {location}{\" \"}\r\n          </h2>\r\n          <button onClick={this.toggleModal}>Adopt {name}</button>\r\n          <p>{description}</p>\r\n          {showModal ? (\r\n            <Modal>\r\n              <LoadableModal toggleModal={this.toggleModal} />\r\n            </Modal>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Details;\r\n"]}